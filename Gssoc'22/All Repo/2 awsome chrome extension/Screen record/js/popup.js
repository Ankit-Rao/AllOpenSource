function setButtonsSliderCss(){$(".record-type__button").each((function(AF,Tw){$(Tw).hasClass("record-type__button_enabled")&&($("#selection-line").removeClass("first-block second-block third-block"),$(Tw).hasClass("record-type__button_desktop")?$("#selection-line").addClass("first-block"):$(Tw).hasClass("record-type__button_tab")?$("#selection-line").addClass("second-block"):$(Tw).hasClass("record-type__button_cam")&&$("#selection-line").addClass("third-block"))}))}function setMicroStatusCss(){$("#mic-status").is(":checked")?($(".microphone-settings .settings__wrapper__option__name").css("opacity","1"),$("#select-microphone").css("opacity","1"),$(".microphone-settings .switch").css("background","#136788"),$("#select-microphone").removeAttr("disabled")):($(".microphone-settings .settings__wrapper__option__name").css("opacity","0.2"),$("#select-microphone").css("opacity","0.2"),$(".microphone-settings .switch").css("background","#2B99C5"),$("#select-microphone").attr("disabled","disabled"))}function setCameraStatusCss(){$("#cam-status").is(":checked")?($(".webcam-settings .settings__wrapper__option__name").css("opacity","1"),$("#select-camera").css("opacity","1"),$(".webcam-settings .switch").css("background","#136788"),$("#select-camera").removeAttr("disabled")):($(".webcam-settings .settings__wrapper__option__name").css("opacity","0.2"),$("#select-camera").css("opacity","0.2"),$(".webcam-settings .switch").css("background","#2B99C5"),$("#select-camera").attr("disabled","disabled"))}chrome.runtime.getBackgroundPage((AF=>{AF.isRecording&&$(".record-btn").text("Finish recording"),AF.updateCamera(),AF.updateMicrophones(),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices().then((function(AF){AF.length&&navigator.mediaDevices.getUserMedia({audio:!0}).then((function(AF){AF.getTracks().forEach((AF=>{AF.stop()})),navigator.mediaDevices.getUserMedia({video:!0}).catch((function(AF){AF.getTracks().forEach((AF=>{AF.stop()})),$(".request-permissions-container").css("display","flex")}))})).catch((function(){$(".request-permissions-container").css("display","flex")}))})),$(`#${AF.recordingType}`).addClass("record-type__button_enabled"),setButtonsSliderCss(),"camera-recording"===AF.recordingType&&$(".camera-checkbox").css("display","none"),AF.microphones.forEach((AF=>{$("#select-microphone").append(new Option(AF["label"],AF["deviceId"]))})),AF.selectedMicrophone&&$("#select-microphone").val(AF.selectedMicrophone["deviceId"]),AF.cameras.forEach((AF=>{$("#select-camera").append(new Option(AF["label"],AF["deviceId"]))})),AF.selectedCamera&&$("#select-camera").val(AF.selectedCamera["deviceId"]),$("#select-resolution").val(AF.quality["name"]),$(".record-btn").click((function(){AF.isRecording?chrome.runtime.sendMessage({type:"stop-recording"}):chrome.runtime.sendMessage({type:`start-${AF.recordingType}`})})),setInterval((function(){AF.isRecording&&$(".record-btn").text("Finish recording")}),500),$(".request-btn").click((function(){chrome.tabs.create({url:"/getAccess.html"})})),$(".record-type__button").click((function(){"camera-recording"===$(this).attr("id")?$(".camera-checkbox").css("display","none"):$(".camera-checkbox").css("display","block"),AF.recordingType=$(this).attr("id"),chrome.storage.sync.set({"recording-type":$(this).attr("id")}),$(".record-type__button").removeClass("record-type__button_enabled"),$(this).addClass("record-type__button_enabled"),setButtonsSliderCss()})),$("#select-resolution").change((function(Tw){AF.qualities[Tw.target.value]&&(AF.quality=AF.qualities[Tw.target.value])})),$("#select-microphone").change((function(Tw){AF.microphones.forEach((jz=>{jz["deviceId"]!==Tw.target.value||(AF.selectedMicrophone=jz)}))})),$("#mic-status").prop("checked",AF.useMicrophone),setMicroStatusCss(),$("#mic-status").change((function(Tw){AF.useMicrophone=Tw.target.checked,chrome.storage.sync.set({useMicro:Tw.target.checked}),setMicroStatusCss()})),0===AF.microphones.length&&($("#select-microphone").prop("disabled",!0),$("#mic-status").prop("disabled",!0)),$("#select-camera").change((function(Tw){AF.cameras.forEach((jz=>{jz["deviceId"]!==Tw.target.value||(AF.selectedCamera=jz)}))})),$("#cam-status").prop("checked",AF.useCamera),setCameraStatusCss(),$("#cam-status").change((function(Tw){AF.useCamera=Tw.target.checked,chrome.storage.sync.set({useCamera:Tw.target.checked}),setCameraStatusCss()})),0===AF.cameras.length&&($("#select-camera").prop("disabled",!0),$("#cam-status").prop("disabled",!0))}));