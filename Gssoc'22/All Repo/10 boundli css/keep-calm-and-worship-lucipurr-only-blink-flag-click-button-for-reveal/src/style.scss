$t-eye: 3.5s;

$thumb-p: .25em .125em;
$thumb-n: 3;
$thumb-l: 4px;
$thumb-r: .5*$thumb-l;
$thumb-w: calc(#{(2*$thumb-n - 1)*$thumb-l} + #{2*nth($thumb-p, 2)});
$thumb-h: 1.375em;
$track-h: .375em;
$input-w: 12em;

@mixin track() {
	border: none;
	width: 100%; height: $track-h;
	border-radius: $track-h;
	box-shadow: 0 1px 1px #e9e9e9, 
			inset 0 1px 3px #5b5b5b;
	background: 
		linear-gradient(#ffa054, #c87838) 
			0 0/ var(--pos, 0) 100% no-repeat
		#8c8c8c
}

@mixin thumb() {
	border: none;
	padding: $thumb-p;
	width: $thumb-w; height: $thumb-h;
	border-radius: 3px;
	--strip: linear-gradient(#a3a3a3, #eaeaea);
	--setup: #{$thumb-l} calc(100% - #{$thumb-l}) no-repeat content-box;
	background: 
		radial-gradient(circle at #{$thumb-r} #{$thumb-r}, 
			#a3a3a3 #{$thumb-r}, transparent 0) 0 0/ #{2*$thumb-l} 100% repeat-x content-box, 
		radial-gradient(circle at #{$thumb-r} calc(100% - (#{$thumb-r})), 
			#eaeaea #{$thumb-r}, transparent 0) 0 0/ #{2*$thumb-l} 100% repeat-x content-box, 
		var(--strip) 0 #{$thumb-r}/ var(--setup), 
		var(--strip) #{2*$thumb-l} #{$thumb-r}/ var(--setup), 
		var(--strip) #{4*$thumb-l} #{$thumb-r}/ var(--setup), 
		linear-gradient(#f9f9f9, #a5a5a5);
}

$btn-d: 1.5em;
$line-w: 1px;
$t: .3s;

@mixin swatch() {
	border-radius: 50%;
	border: none;
	box-shadow: inset 0 0 0 1px #f3f3f3
}

*, :before, :after { box-sizing: inherit; margin: 0; font: inherit }

body {
	box-sizing: border-box;
	overflow-x: hidden;
	font: 1em/1.25 trebuchet ms, sans-serif
}

.grid {
	display: grid;
	grid-template: 1fr/ 1fr max-content;
	min-height: 100vh;
	
	@media (orientation: portrait) {
		grid-template: 1fr max-content/ 1fr
	}
}

svg {
	max-width: 100vmin;
	place-self: center
}

mask { fill: #fff }

.fur {
	fill: #252525;
	stroke: #373737;
	stroke-width: 9
}

.skin, .lght, .spot {
	color: #131313;
	fill: currentcolor
}

[id='str-5'] {
	fill: none;
	stroke: currentcolor;
	stroke-width: 39
}

.lght {
	transition: 1s ease-out;
	transition-property: color, opacity;
	
	+ use { opacity: .001 }
	
	.glow & {
		&, + use {
			color: tomato;
			opacity: .999
		}
	}
}

[id='ker'] {
	fill: #afafaf
}

.inc {
	transform: var(--ini) scale(0);
	transition: transform 1s;
	
	.hunt & { transform: var(--ini) scale(1) }
}

[id='nose'] {
	fill: pink
}

[id='wsk'] {
	fill: none;
	stroke: #595959;
	stroke-width: 7;
	stroke-linecap: round
}

.wsk {
	transform: var(--ini) rotate(0deg);
	animation: osc 1s cubic-bezier(1,1.59,.61,.74) infinite alternate;
	animation-play-state: paused;

	.feel & { animation-play-state: running }
}

@keyframes osc {
	0%, 9% { transform: var(--ini) rotate(0deg) }
	to { transform: var(--ini) rotate(-13deg) }
}

.sclera {
	fill: #c9c9c9
}

[id='eye'] {
	d: path('M165 1160c110-200 320-160 320-160l-15 25c-50 150-150 150-255 115z');
	animation: eye $t-eye infinite;
	animation-play-state: paused;
	
	.move & { animation-play-state: running }
}

@keyframes eye {
	20% { d: path('M165 1160c30-270 210-210 320-160l-30 25c-20 175-195 180-260 115z') }
	40% { d: path('M145 1165c35-135 265-60 320-120l-25 35c-100 140-215 95-265 65z') }
	60% { d: path('M145 1160c30-85 300-65 315-125l-10 30c-45 135-225 95-265 70z') }
	80% { d: path('M145 1160c50-80 230-0 310-110l-15 35c-45 95-210 65-255 55z') }
}

.rim {
	fill: none;
	stroke: brown;
	stroke-opacity: .85;
	stroke-width: 25
}

[id*='iris'] {
	fill: var(--iris-c, #8fae45)
}

[id='iris0'] {
	transform: translate(275px, 1050px) rotate(0deg) scale(.85, 1.35);
	animation: iris0 $t-eye infinite
}

@keyframes iris0 {
	20% { transform: translate(305px, 1025px) rotate(2deg) scale(.8, 1.15) }
	40% { transform: translate(240px, 1085px) rotate(0deg) scale(1) }
	60% { transform: translate(385px, 1135px) rotate(15deg) scale(.85, 1.1) }
	80% { transform: translate(390px, 1135px) rotate(15deg) scale(.9, 1.1) }
}

[id='pupil0'] {
	transform: translate(275px, 1050px) rotate(0deg) scale(.85, 1.35);
	animation: pupil0 $t-eye infinite
}

@keyframes pupil0 {
	20% { transform: translate(305px, 1025px) rotate(-2.5deg) scale(.15, 1) }
	40% { transform: translate(240px, 1085px) rotate(0deg) scale(.75, 1) }
	60% { transform: translate(385px, 1135px) rotate(9deg) scale(.6, 1.1) }
	80% { transform: translate(390px, 1135px) rotate(13deg) scale(.4, 1.1) }
}

[id='iris1'] {
	transform: translate(-385px, 1035px) rotate(0deg) scale(.85, 1.35);
	animation: iris1 $t-eye infinite
}

@keyframes iris1 {
	20% { transform: translate(-345px, 1035px) rotate(5deg) scale(.8, 1.15) }
	40% { transform: translate(-385px, 1045px) rotate(5deg) scale(.95, 1.15) }
	60% { transform: translate(-290px, 1150px) rotate(19deg) scale(.9, 1.25) }
	80% { transform: translate(-280px, 1150px) rotate(19deg) scale(1.1, 1.25) }
}

[id='pupil1'] {
	transform: translate(-385px, 1035px) rotate(0deg) scale(.85, 1.35);
	animation: pupil1 $t-eye infinite
}

@keyframes pupil1 {
	20% { transform: translate(-340px, 1030px) rotate(6deg) scale(.125, .9) }
	40% { transform: translate(-395px, 1050px) rotate(2deg) scale(.75, 1.1) }
	60% { transform: translate(-290px, 1150px) rotate(19deg) scale(.6, 1.15) }
	80% { transform: translate(-280px, 1150px) rotate(19deg) scale(.4, 1.15) }
}

[id*='iris'], [id*='pupil'] {
	animation-play-state: paused;
	
	.move & { animation-play-state: running }
}

[id='fork'] {
	transform: translate(500px, 2000px) rotate(45deg) 
		translatey(calc((var(--y2) - var(--min))*-.5px))
}

[id='handle'] {
	stroke: currentcolor;
	stroke-width: 25;
	transform: scaley(calc(var(--y2)/var(--min)));
}

form {
	min-width: 15em;
	background: radial-gradient(circle, #e6dfd9, #9d8c82);
	font-size: 1.25em;
}

[role='group'] {
	margin: .5em;
	padding: .5em;
	border-radius: 3px;
	box-shadow: 1px 1px 3px;
	
	> :first-child { margin-bottom: .25em }
}

.wrap {
	&--toggle {
		position: relative;
		width: var(--tgl-w); height: var(--tgl-h);
		margin: 0 var(--lbl-w);
	}
}

input {
	&[type='radio'] {
		opacity: 0;
		
		&, + label {
			box-sizing: content-box;
			z-index: 2;
			position: absolute;
			width: var(--lbl-w); height: 100%
		}
		
		&[id*='-n'] {
			&, + label {
				right: 0;
				border-right: solid var(--tgl-w) transparent
			}
		}
		
		&[id*='-y'] {
			&, + label {
				left: 0;
				border-left: solid var(--tgl-w) transparent
			}
		}
		
		&:checked {
			&, + label { z-index: 1 }
		}
		
		+ label {
			text-transform: uppercase;
			cursor: pointer
		}
	}
	
	&[type='range'] {
		&, 
		&::-webkit-slider-runnable-track, 
		&::-webkit-slider-thumb {
			-webkit-appearance: none
		}
		
		box-sizing: content-box;
		border: solid .375em transparent;
		width: $input-w; height: $thumb-h;
		border-radius: 5px;
		background: none;
		cursor: pointer;
		
		&::-webkit-slider-runnable-track {
			@include track()
		}
		&::-moz-range-track {
			@include track()
		}
		&::-webkit-slider-thumb {
			margin-top: ($track-h - $thumb-h)/2;
			@include thumb()
		}
		&::-moz-range-thumb {
			@include thumb()
		}
		
		&:focus {
			outline: none;
			box-shadow: 0 0 0 2px darkorange
		}
	}
	
	&[type='color'] {
		box-sizing: border-box;
		border: solid 1px currentcolor;
		width: $btn-d; height: $btn-d;
		margin: 0 .125em 0 .25em;
		padding: 3px;
		border-radius: 50%;
		background-color: #464646;
		background: 
				conic-gradient(#464646 var(--a, 0deg), transparent 0%) border-box;
		color: transparent;
		vertical-align: middle;
		transition: $t;
		transition-property: --a, color;
		cursor: pointer;

		&::-webkit-color-swatch-wrapper { padding: 0 }

		&::-webkit-color-swatch { @include swatch }

		&::-moz-color-swatch { @include swatch }

		&:focus {
			outline: none;
			color: darkorange
		}

		&:hover { --a: 1turn }
	}
}

[aria-labelledby='glow-lbl'] {
	--tgl-w: 3em;
	--tgl-h: 1.5em;
	--lbl-w: 2em;
	--col-n: #76100f;
	--col-y: #238630;
	
	.wrap {
		border-radius: var(--tgl-h);
		box-shadow: 0 1px 1px rgba(#eee, .7), 
			inset 0 1px 3px rgba(#111, .7);
		background: var(--col-n);
		transition: background-color $t;
		
		&:before {
			--btn-d: calc(var(--tgl-h) + 4px);
			position: absolute;
			margin: -2px;
			border: solid calc(.25*var(--btn-d)) transparent;
			width: var(--btn-d); height: var(--btn-d);
			border-radius: 50%;
			background: 
				linear-gradient(#c9c9c9, #f1f1f1) padding-box, 
				linear-gradient(#f3f3f3, #b1b1b1) border-box;
			transition: transform $t;
			content: ''
		}
		
		.glow & {
			background: var(--col-y);
			
			&:before {
				transform: translate(calc(var(--tgl-w) - var(--tgl-h)))
			}
		}
	}
	
	label {
		overflow: hidden;
		
		&:before {
			display: grid;
			place-content: center;
			width: 100%; height: 100%;
			font-size: 1.5em;
			text-shadow: 0 -1px 1px rgba(#000, .7);
		}
		
		&[for*='-n'] {
			color: var(--col-n);
			
			&:before { content: '✘' }
		}
		
		&[for*='-y'] {
			color: var(--col-y);
			
			&:before { content: '✔' }
		}
	}
}

[aria-labelledby='feel-lbl'] {
	--tgl-w: 4em;
	--tgl-h: 1.75em;
	--lbl-w: 2.5em;
	
	.wrap {
		border-radius: .25em;
		box-shadow: 0 1px 1px #e9e9e9, 
			inset 0 1px 3px #5b5b5b;
		background: 
			linear-gradient(#ffa054, #c87838) 
				calc(-1*var(--tgl-w))/ var(--tgl-w) 100% no-repeat	
			#8c8c8c;
		transition: background-position $t;
		
		&:before, &:after {
			position: absolute;
			margin: -2px;
			border: solid calc(.25*var(--tgl-h)) transparent;
			width: calc(.5*var(--tgl-w) + 4px);
			height: calc(var(--tgl-h) + 4px);
			border-radius: inherit;
			background: linear-gradient(#f9f9f9, #a5a5a5) border-box;
			transition: transform $t;
			content: ''
		}
		
		&:after {
			--bg-setup: 0 0/ 27% 35% space padding-box;
			background: 
				linear-gradient(#737373, #eaeaea) var(--bg-setup);
			--mask: radial-gradient(circle closest-side, red calc(100% - 1px), transparent 100%) var(--bg-setup);
			-webkit-mask: var(--mask);
							mask: var(--mask)
		}
		
		.feel & {
			background-position: 0;
			
			&:before, &:after {
				transform: translate(calc(var(--tgl-w) - 100% + 4px));
			}
		}
	}
	
	label {
		display: grid;
		place-content: center;
		color: #707070;
		text-shadow:
			0 -1px #8f8f8f, 
			0 1px #dfdfdf;
	}
}

[aria-labelledby='hunt-lbl'] {
	--tgl-w: 3.5em;
	--tgl-h: 1.5em;
	--lbl-w: 2.5em;
	--lin-w: .25em;
	
	.wrap {
		filter: drop-shadow(0 1px 1px #e3e3e3);
		
		&:before, &:after {
			position: absolute;
			content: ''
		}
		
		&:before {
			border: solid 0 transparent;
			border-width: calc(.25*var(--tgl-h)) 0 calc(.25*var(--tgl-h) - 1px);
			width: 100%; height: 100%;
			background: 
				linear-gradient(#ee8c40, #bf814d) padding-box;
			--mask: 
				radial-gradient(closest-side, red calc(100% - 1px), transparent 100%) 
					0 50%/ calc(.5*var(--tgl-h)) calc(.5*var(--tgl-h)) 
					no-repeat border-box, 
				radial-gradient(closest-side, red calc(100% - 1px), transparent 100%) 
					100% 50%/ calc(.5*var(--tgl-h)) calc(.5*var(--tgl-h)) 
					no-repeat border-box, 
				linear-gradient(red, red) 50% calc(.5*(var(--tgl-h) - var(--lin-w)))/ calc(100% - .5*var(--tgl-h)) var(--lin-w) no-repeat border-box;
			-webkit-mask: var(--mask);
			-webkit-mask-repeat: no-repeat;
			-webkit-mask-box: border-box;
							mask: var(--mask);
							mask-repeat: no-repeat;
							mask-box: border-box
		}
		
		&:after {
			border: solid calc(var(--tgl-h)/3) transparent;
			width: var(--tgl-h); height: var(--tgl-h);
			border-radius: 50%;
			box-shadow: 0 2px 5px rgba(#000, .7), 
				inset 0 1px 3px rgba(#5b5b5b, .5);
			background: 
				linear-gradient(#ee8c40, #bf814d) padding-box, 
				radial-gradient(circle at 50% calc(50% + 1px), rgba(#fefefe, .4) calc(var(--tgl-h)/6), rgba(#fefefe, 0) calc(var(--tgl-h)/3)) border-box, 
				linear-gradient(#fefefe, #939393) border-box;
			transition: transform $t
		}
		
		.hunt &:after {
			transform: translate(calc(var(--tgl-w) - 100%))
		}
	}
	
	label {
		display: grid;
		place-content: center;
		color: #707070;
		text-shadow: 0 -1px #8f8f8f
	}
}

[aria-labelledby='move-lbl'] {
	--tgl-w: 9em;
	--tgl-h: 1.75em;
	--lbl-w: 2.5em;
	
	.wrap {
		border-radius: var(--tgl-h);
		box-shadow: 
			inset 0 0 2px #262626, 
			inset 0 0 7px 1px #262626;
		background: #464646;
		
		&:before, &:after {
			position: absolute;
			margin: 2px;
			padding: 1px;
			width: calc(4/9*var(--tgl-w) - 4px); height: calc(100% - 4px);
			border-radius: var(--tgl-h);
			box-shadow: 
				0 0 1px #7a7a7a, 
				inset 0 0 2px 1px #7a7a7a, 
				inset 2px 0 1px 1px #fefefe, 
				inset -2px 0 1px 1px #fefefe;
			background:
				repeating-linear-gradient(90deg, #a7a7a7, #a7a7a7 1px, #f7f7f7 0, #f7f7f7 2px, transparent 0, transparent 3px) .25em 50%/ 9px 39% no-repeat content-box, 
				repeating-linear-gradient(90deg, #a7a7a7, #a7a7a7 1px, #f7f7f7 0, #f7f7f7 2px, transparent 0, transparent 3px) calc(100% - .25em) 50%/ 9px 39% no-repeat content-box, 
				radial-gradient(circle, #fefefe, #939393 var(--tgl-h)) 
					calc(-2/9*var(--tgl-w) + 4px) 50%;
			transition: transform $t;
			content: '';
		}
		
		&:after {
			background: 
				linear-gradient(#fefefe, #939393) border-box;
			--mask:
				linear-gradient(red, red), 
				radial-gradient(circle closest-side, red calc(100% - 1px), transparent 100%) 
					0/ calc(var(--tgl-h) - 4px) calc(var(--tgl-h) - 4px) space;
			-webkit-mask: var(--mask);
			-webkit-mask-composite: xor;
							
		}
		
		.move & {
			&:before, &:after {
				transform: translate(calc(var(--tgl-w) - 100% - 4px))
			}
		}
	}
	
	label {
		display: grid;
		place-content: center;
		color: #707070;
		text-shadow:
			0 -1px #8f8f8f, 
			0 1px #dfdfdf
	}
}

[aria-labelledby='fork-lbl'] {
	--pos: calc(.5*#{$thumb-w} + (var(--y2) - var(--min))/(var(--max) - var(--min))*(#{$input-w} - #{$thumb-w}));
}

[aria-labelledby='iris-lbl'] {
	font-family: ubuntu mono, consolas, monaco, monospace;
	
	.wrap { display: flex; align-items: center }
	
	label:after { content: ':' }
}

[id='summon'] {
	position: absolute;
	z-index: 1;
	top: 50%; left: 50%;
	border: solid 0 transparent;
	border-width: .5em 0 1em;
	padding: 0 2em .5em;
	height: 4.5em;
	transform: translate(-50%, -50%);
	background: 
		linear-gradient(60deg, #55575c 43%, transparent 0) 
			0 0/ 100% .5em no-repeat border-box, 
		linear-gradient(-60deg, #54595e 43%, transparent 0) 
			0 100%/ 100% .5em no-repeat padding-box, 
		linear-gradient(#1e6b42, #65bc7f) padding-box;
	color: #fff;
	font-size: 1.5em;
	clip-path: polygon(0 0, 1em calc(100% - 1em), 0 calc(100% - 1em), 0 100%, calc(100% + 1em) 100%, calc(100% + 1em) calc(100% - 1em), 100% calc(100% - 1em), calc(100% - 1em) 0);
	white-space: nowrap;
	filter: sepia(1);
	transition: filter $t;
	cursor: pointer;
	
	&:before, &:after {
		position: absolute;
		z-index: -1;
		bottom: -.125em; left: 0em; right: 0em;
		height: 1em;
		border-radius: 500%;
		transform: rotate(7deg);
		background: radial-gradient(closest-side, rgba(#000, .5), transparent);
		filter: blur(2px);
		mix-blend-mode: screen;
		content: ''
	}
	
	&:after { transform: rotate(-7deg) }
	
	&:hover, &:focus {
		outline: solid 0 transparent;
		filter: none;
	}
}

.dissolve {
	--mask: radial-gradient(
				red calc(var(--p, 1)*100%), transparent 0) 
			0/ 6px 6px round;
	-webkit-mask: var(--mask);
					mask: var(--mask);
	transition: --p 1s
}

.invis { --p: 0 }